{% extends 'global/base.html.twig' %}

{% if uri.param('view') %}
    {% set view = uri.param('view') %}
{% endif %}

{% block content %}
<div class="news">

    {# Listbar #}
    {% include 'navigation/listbar.html.twig' %}

    {# List #}
    {% if view == 'compact' %}

        {% for p in page.children.order('date', 'desc') %}
            <div class='news--item__compact'>

                <a href='{{p.url}}' class='news--item__compact--link'></a>

                <div class='news--item__compact--text'>

                    {# Meta #}
                    <div class='news--item__compact--text--meta'>
                        <div class='news--item__compact--text--meta--date'>{{ p.date|date('Y-m-d') }}</div>
                    </div>
                    
                    {# Title #}
                    <h1 class='news--item__compact--text--title'><a href='{{p.url}}'>{{p.title}}</a></h1>

                    {# Tags #}
                    <div class='news--item__compact--text--tags'>
                        {% for tag in p.taxonomy.tag %}
                            <a href="{{ base_url }}/filter/tag:{{ tag }}" class="news--item__compact--text--tags--item">{{ tag }}</a>
                        {% endfor %}
                    </div>

                </div>
                
            </div>
        {% endfor %}

    {% else %}

        {% for p in page.children.order('date', 'desc') %}
            <div class='news--item__list'>

                <a href='{{p.url}}' class='news--item__list--link'></a>

                <div class='news--item__list--text'>

                    {# Meta #}
                    <div class='news--item__list--text--meta'>
                        <div class='news--item__list--text--meta--date'>{{ p.date|date('Y-m-d') }}</div>
                    </div>
                    
                    {# Title #}
                    <h1 class='news--item__list--text--title'>
                        <a href='{{p.url}}'>{{p.title}}</a>
                    </h1>

                    {# Tags #}
                    <div class='news--item__list--text--tags'>
                        {% for tag in p.taxonomy.tag %}
                            <a href="{{ base_url }}/filter/tag:{{ tag }}" class="taxonomy--tag taxonomy--tag__general">{{ tag }}</a>
                        {% endfor %}
                    </div>

                </div>

                <a href='{{p.url}}' class='news--item__list--image'>
                    {{ p.media[p.header.featured_image].cropZoom(200, 200).html('', p.title|escape)}}
                </a>              
                
            </div>
        {% endfor %}
    
    {% endif %}

    <div class='news--item__more'>
        <div class='news--item__more--button'>Load more</div>
    </div>

</div>
{% endblock %}
